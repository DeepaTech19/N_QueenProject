<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sorting Algorithm Visualizer</title>
<style>
  body {
    font-family: "Poppins", sans-serif;
    background: linear-gradient(to right, #eef2f3, #dfe9f3);
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    padding-top: 40px;
  }

  h1 {
    color: #1f3c88;
    font-weight: 700;
    margin-bottom: 25px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
  }

  .controls {
    background: white;
    padding: 15px 25px;
    border-radius: 16px;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
    display: flex;
    gap: 10px;
    align-items: center;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 25px;
  }

  input, select, button {
    padding: 10px 15px;
    border: 1px solid #ccc;
    border-radius: 10px;
    font-size: 15px;
    outline: none;
  }

  button {
    background: #1f3c88;
    color: white;
    font-weight: 600;
    cursor: pointer;
    border: none;
    transition: all 0.3s ease;
  }

  button:hover {
    background: #162c63;
    transform: translateY(-2px);
  }

  .array-container {
    display: flex;
    gap: 12px;
    margin-top: 40px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .box {
    width: 55px;
    height: 55px;
    background: #ffffff;
    border: 2px solid #1f3c88;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    border-radius: 10px;
    transition: all 0.4s ease;
    position: relative;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  .highlight {
    background: #f9e79f;
    border-color: #f1c40f;
    transform: scale(1.1);
  }

  .swap {
    background: #e74c3c;
    color: white;
    border-color: #c0392b;
  }

  .sorted {
    background: #2ecc71;
    color: white;
    border-color: #27ae60;
  }

  .pointer {
    position: absolute;
    bottom: -25px;
    font-size: 14px;
    color: #162c63;
    font-weight: 700;
    text-transform: uppercase;
  }

  #step {
    margin-top: 70px;
    font-weight: 600;
    color: #333;
    background: white;
    padding: 12px 20px;
    border-radius: 12px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    text-align: center;
    min-width: 300px;
  }
</style>
</head>
<body>
  <h1>Sorting Algorithm Visualizer</h1>

  <div class="controls">
    <input type="text" id="arrayInput" placeholder="Enter numbers e.g. 5 3 8 4 2" />
    <select id="algorithm">
      <option value="selection">Selection Sort</option>
      <option value="insertion">Insertion Sort</option>
      <option value="bubble">Bubble Sort</option>
      <option value="merge">Merge Sort</option>
      <option value="quick">Quick Sort</option>
    </select>
    <button id="startBtn">Start Visualization</button>
  </div>

  <div id="arrayContainer" class="array-container"></div>
  <div id="step"></div>

  <script>
    const delay = (ms) => new Promise(res => setTimeout(res, ms));

    function renderArray(arr, highlight = [], swap = [], message = "", pointers = {}) {
      const container = document.getElementById('arrayContainer');
      const stepMsg = document.getElementById('step');
      stepMsg.innerText = message;
      container.innerHTML = '';

      arr.forEach((num, i) => {
        const box = document.createElement('div');
        box.classList.add('box');
        box.textContent = num;

        if (highlight.includes(i)) box.classList.add('highlight');
        if (swap.includes(i)) box.classList.add('swap');

        for (let key in pointers) {
          if (pointers[key] === i) {
            const label = document.createElement('div');
            label.classList.add('pointer');
            label.innerText = key;
            box.appendChild(label);
          }
        }

        container.appendChild(box);
      });
    }

    async function selectionSort(arr) {
      for (let i = 0; i < arr.length - 1; i++) {
        let min = i;
        for (let j = i + 1; j < arr.length; j++) {
          renderArray(arr, [i, j, min], [], `Comparing arr[${j}] with arr[${min}]`, { i, j, min });
          await delay(800);
          if (arr[j] < arr[min]) min = j;
        }
        [arr[i], arr[min]] = [arr[min], arr[i]];
        renderArray(arr, [], [i, min], `Swapping ${arr[min]} and ${arr[i]}`, { i, min });
        await delay(800);
      }
      renderArray(arr, [], [], "✅ Array is sorted!");
    }

    async function insertionSort(arr) {
      for (let i = 1; i < arr.length; i++) {
        let key = arr[i];
        let j = i - 1;
        while (j >= 0 && arr[j] > key) {
          arr[j + 1] = arr[j];
          renderArray(arr, [j, j + 1], [], `Moving ${arr[j]} ahead`, { i, j });
          await delay(700);
          j--;
        }
        arr[j + 1] = key;
        renderArray(arr, [], [j + 1], `Placed ${key} at position ${j + 1}`, { i });
        await delay(700);
      }
      renderArray(arr, [], [], "✅ Array is sorted!");
    }

    async function bubbleSort(arr) {
      for (let i = 0; i < arr.length - 1; i++) {
        for (let j = 0; j < arr.length - i - 1; j++) {
          renderArray(arr, [j, j + 1], [], `Comparing ${arr[j]} and ${arr[j + 1]}`, { j, next: j + 1 });
          await delay(600);
          if (arr[j] > arr[j + 1]) {
            [arr[j], arr[j + 1]] = [arr[j + 1], arr[j]];
            renderArray(arr, [], [j, j + 1], `Swapping ${arr[j]} and ${arr[j + 1]}`, { j, next: j + 1 });
            await delay(600);
          }
        }
      }
      renderArray(arr, [], [], "✅ Array is sorted!");
    }

    async function mergeSort(arr) {
      async function merge(arr, l, m, r) {
        let left = arr.slice(l, m + 1);
        let right = arr.slice(m + 1, r + 1);
        let i = 0, j = 0, k = l;

        while (i < left.length && j < right.length) {
          renderArray(arr, [l + i, m + 1 + j], [], `Merging ${left[i]} and ${right[j]}`, { L: l + i, R: m + 1 + j });
          await delay(700);
          if (left[i] <= right[j]) arr[k++] = left[i++];
          else arr[k++] = right[j++];
        }
        while (i < left.length) arr[k++] = left[i++];
        while (j < right.length) arr[k++] = right[j++];
        renderArray(arr, [], [l, r], `Merged section [${l}, ${r}]`);
        await delay(700);
      }

      async function divide(arr, l, r) {
        if (l >= r) return;
        let m = Math.floor((l + r) / 2);
        await divide(arr, l, m);
        await divide(arr, m + 1, r);
        await merge(arr, l, m, r);
      }

      await divide(arr, 0, arr.length - 1);
      renderArray(arr, [], [], "✅ Array is sorted!");
    }

    async function quickSort(arr) {
      async function partition(arr, low, high) {
        let pivot = arr[high];
        let i = low - 1;
        for (let j = low; j < high; j++) {
          renderArray(arr, [j, high], [], `Comparing ${arr[j]} with pivot ${pivot}`, { j, pivot: high });
          await delay(700);
          if (arr[j] < pivot) {
            i++;
            [arr[i], arr[j]] = [arr[j], arr[i]];
            renderArray(arr, [], [i, j], `Swapping ${arr[i]} and ${arr[j]}`, { i, j, pivot: high });
            await delay(700);
          }
        }
        [arr[i + 1], arr[high]] = [arr[high], arr[i + 1]];
        renderArray(arr, [], [i + 1, high], `Placing pivot ${pivot} at position ${i + 1}`, { pivot: high });
        await delay(700);
        return i + 1;
      }

      async function sort(arr, low, high) {
        if (low < high) {
          let pi = await partition(arr, low, high);
          await sort(arr, low, pi - 1);
          await sort(arr, pi + 1, high);
        }
      }

      await sort(arr, 0, arr.length - 1);
      renderArray(arr, [], [], "✅ Array is sorted!");
    }

    document.getElementById('startBtn').addEventListener('click', async () => {
      const input = document.getElementById('arrayInput').value.trim();
      if (!input) return alert("Please enter array elements!");
      const arr = input.split(' ').map(Number);
      const algo = document.getElementById('algorithm').value;
      renderArray(arr);

      if (algo === 'selection') await selectionSort(arr);
      else if (algo === 'insertion') await insertionSort(arr);
      else if (algo === 'bubble') await bubbleSort(arr);
      else if (algo === 'merge') await mergeSort(arr);
      else if (algo === 'quick') await quickSort(arr);
    });
  </script>
</body>
</html>
